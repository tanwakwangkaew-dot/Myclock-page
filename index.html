<!DOCTYPE html>
<html lang="th" data-theme="cyber">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber Clock</title>
  <style>
    :root {
      --bg: radial-gradient(circle at top, #0f172a 0%, #020617 50%, #000 100%);
      --panel: rgba(2, 6, 23, 0.35);
      --border: rgba(148, 163, 184, 0.25);
      --text: #e2e8f0;
      --accent: #38bdf8;
      --accent2: #a855f7;
    }
    html[data-theme="cyber"] {
      --bg: radial-gradient(circle at top, #0f172a 0%, #020617 50%, #000 100%);
      --panel: rgba(2, 6, 23, 0.35);
      --border: rgba(148, 163, 184, 0.25);
      --text: #e2e8f0;
      --accent: #38bdf8;
      --accent2: #a855f7;
    }
    html[data-theme="neon"] {
      --bg: radial-gradient(circle at top, #022c22 0%, #01140d 50%, #000 100%);
      --panel: rgba(1, 20, 13, 0.5);
      --border: rgba(74, 222, 128, 0.35);
      --text: #ecfdf3;
      --accent: #4ade80;
      --accent2: #f97316;
    }
    html[data-theme="sunset"] {
      --bg: radial-gradient(circle at top, #500724 0%, #2e1065 50%, #0f172a 100%);
      --panel: rgba(79, 70, 229, 0.18);
      --border: rgba(244, 114, 182, 0.3);
      --text: #ffe4e6;
      --accent: #f472b6;
      --accent2: #93c5fd;
    }
    html[data-theme="sketch"] {
      --bg: #e5e7eb;
      --panel: #f8fafc;
      --border: #111827;
      --text: #111827;
      --accent: #111827;
      --accent2: #6b7280;
    }

    * { box-sizing: border-box; font-family: "Courier New", monospace; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: var(--bg);
      color: var(--text);
      transition: background 0.4s ease;
    }
    .wrap {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 18px;
      backdrop-filter: blur(10px);
      padding: 20px 22px 16px;
      width: 320px;
      position: relative;
      box-shadow: 0 0 30px rgba(15, 23, 42, 0.25);
      transition: background 0.3s ease, border 0.3s ease, box-shadow 0.3s ease;
    }
    html[data-theme="sketch"] .wrap {
      box-shadow: 4px 4px 0 #111827;
      backdrop-filter: none;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      opacity: 0.7;
    }
    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 8px #22c55e;
      display: inline-block;
      margin-right: 4px;
    }
    html[data-theme="sketch"] .status-dot {
      box-shadow: none;
      border: 1px solid #111827;
    }

    .clock { margin-top: 16px; text-align: center; }
    .time {
      font-size: 3rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      text-shadow: 0 0 16px rgba(56, 189, 248, 0.5);
      color: var(--accent);
      line-height: 1;
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    html[data-theme="sketch"] .time { text-shadow: none; }
    .seconds {
      font-size: 1rem;
      color: var(--accent2);
      margin-left: 6px;
      text-shadow: 0 0 10px rgba(168, 85, 247, 0.6);
      transition: color 0.3s ease, text-shadow 0.3s ease;
    }
    html[data-theme="sketch"] .seconds { text-shadow: none; }
    .date {
      margin-top: 6px;
      font-size: 0.7rem;
      letter-spacing: 0.2em;
      opacity: 0.7;
      text-transform: uppercase;
    }
    .divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(148, 163, 184, 0.3), transparent);
      margin: 14px 0 10px;
    }
    html[data-theme="sketch"] .divider {
      background: repeating-linear-gradient(90deg, #111827 0 4px, transparent 4px 8px);
      opacity: 0.5;
    }
    .metrics { display: flex; gap: 10px; }
    .metric-box {
      flex: 1;
      background: radial-gradient(circle, rgba(15, 23, 42, 0.4), rgba(15, 23, 42, 0));
      border: 1px solid rgba(148, 163, 184, 0.15);
      border-radius: 10px;
      padding: 6px 8px 8px;
      transition: border 0.3s ease, background 0.3s ease;
    }
    html[data-theme="sketch"] .metric-box {
      background: #fff;
      border: 1px solid #111827;
    }
    .metric-title {
      font-size: 0.55rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      opacity: 0.55;
      margin-bottom: 5px;
    }
    .metric-value { font-size: 1rem; color: var(--text); }
    .line {
      width: 100%;
      height: 3px;
      background: linear-gradient(90deg, rgba(56, 189, 248, 0.6), rgba(168, 85, 247, 0.6));
      border-radius: 999px;
      margin-top: 6px;
      animation: glow 3s ease-in-out infinite alternate;
    }
    html[data-theme="neon"] .line {
      background: linear-gradient(90deg, rgba(74, 222, 128, 0.6), rgba(249, 115, 22, 0.6));
    }
    html[data-theme="sunset"] .line {
      background: linear-gradient(90deg, rgba(244, 114, 182, 0.6), rgba(147, 197, 253, 0.6));
    }
    html[data-theme="sketch"] .line {
      background: #111827;
      animation: none;
      height: 2px;
    }
    @keyframes glow {
      0% { filter: drop-shadow(0 0 3px rgba(56, 189, 248, 0.8)); }
      100% { filter: drop-shadow(0 0 6px rgba(168, 85, 247, 0.9)); }
    }

    .scanline {
      position: absolute;
      top: -30px;
      left: 0;
      width: 100%;
      height: 30px;
      background: linear-gradient(180deg, rgba(56,189,248,0.6), transparent);
      animation: slide 4s linear infinite;
      filter: blur(6px);
      opacity: 0.4;
      pointer-events: none;
    }
    html[data-theme="sketch"] .scanline { display: none; }
    @keyframes slide {
      0% { top: -40px; }
      100% { top: 110%; }
    }
    .theme-hint {
      margin-top: 10px;
      font-size: 0.6rem;
      text-align: center;
      opacity: .45;
    }
  </style>
</head>
<body>
  <div class="wrap" id="clockBox">
    <div class="scanline"></div>
    <div class="top-bar">
      <div><span class="status-dot"></span>CLOCK</div>
      <div id="tz">TH/BKK</div>
    </div>
    <div class="clock">
      <div>
        <span id="time" class="time">00:00</span>
        <span id="sec" class="seconds">00</span>
      </div>
      <div id="date" class="date">--</div>
    </div>
    <div class="divider"></div>
    <div class="metrics">
      <div class="metric-box">
        <div class="metric-title">weekday</div>
        <div id="weekday" class="metric-value">--</div>
        <div class="line"></div>
      </div>
      <div class="metric-box">
        <div class="metric-title">battery</div>
        <div id="battery" class="metric-value">--%</div>
        <div class="line"></div>
      </div>
    </div>
    <p class="theme-hint">แตะที่กล่องนี้เพื่อเปลี่ยนธีม</p>
  </div>

  <script>
    const dayNames = ["อา.", "จ.", "อ.", "พ.", "พฤ.", "ศ.", "ส."];
    const monthNames = ["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."];

    function updateClock() {
      const now = new Date();
      let h = now.getHours().toString().padStart(2, "0");
      let m = now.getMinutes().toString().padStart(2, "0");
      let s = now.getSeconds().toString().padStart(2, "0");

      document.getElementById("time").textContent = `${h}:${m}`;
      document.getElementById("sec").textContent = s;

      const d = now.getDate();
      const mo = monthNames[now.getMonth()];
      const y = now.getFullYear();
      document.getElementById("date").textContent = `${d} ${mo} ${y}`;

      document.getElementById("weekday").textContent = dayNames[now.getDay()];
    }

    updateClock();
    setInterval(updateClock, 1000);

    // ----- ส่วนแบต -----
    const batteryEl = document.getElementById("battery");

    // ฟังก์ชันเซ็ตค่าแบต
    function setBatteryPercent(pct, charging = false) {
      pct = Math.round(pct);
      batteryEl.textContent = charging ? pct + "% ⚡" : pct + "%";
    }

    // ถ้ามี Battery API ให้ใช้ของจริง
    if (navigator.getBattery) {
      navigator.getBattery().then(function(battery) {
        function updateAll() {
          setBatteryPercent(battery.level * 100, battery.charging);
        }
        updateAll();
        battery.addEventListener("levelchange", updateAll);
        battery.addEventListener("chargingchange", updateAll);
      }).catch(function() {
        // ถ้า error ให้ใช้ค่าเดมอ
        setBatteryPercent(82, false);
      });
    } else {
      // ไม่รองรับ Battery API -> เดมอ
      setBatteryPercent(82, false);
    }

    // ----- เปลี่ยนธีม -----
    const themes = ["cyber", "neon", "sunset", "sketch"];
    let current = 0;
    const box = document.getElementById("clockBox");

    function switchTheme() {
      current = (current + 1) % themes.length;
      document.documentElement.setAttribute("data-theme", themes[current]);
    }

    box.addEventListener("click", switchTheme);
    box.addEventListener("touchend", function(e){
      e.preventDefault();
      switchTheme();
    });
  </script>
</body>
</html>